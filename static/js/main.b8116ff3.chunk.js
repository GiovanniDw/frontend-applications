(this["webpackJsonpfrontend-applications"]=this["webpackJsonpfrontend-applications"]||[]).push([[0],{191:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(0),i=n.n(a),c=n(55),o=n.n(c),s=n(3),l=(n(183),n(6)),u=n(5),d=n(56);function f(){var t=Object(l.a)(["\n    ",";\n\n\t* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n  html {\n\t\n\t  box-sizing: border-box;\n        overflow-y: scroll;\n\t\t\n  }\n  #root {\n\t  ","\n\t  ","\n\t  ","\n\t  padding-top: min(16px, env(safe-area-inset-top));\n\t  padding-left: min(16px, env(safe-area-inset-left));\n        padding-right: min(16px, env(safe-area-inset-right));\n        padding-bottom: min(16px, env(safe-area-inset-bottom));\n\t\t\n  }\n  :root {\n\t--safe-area-inset-top   : 16px;\n    --safe-area-inset-right : 16px;\n    --safe-area-inset-bottom: 16px;\n    --safe-area-inset-left  : 16px;  \n\tbody {\n\t\tbackground-color: ",";\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n\t\t'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n\t\t'Helvetica Neue', sans-serif;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\t","\n\tmin-width:100%;\n\t\tmin-height:100%;\n\t\n\t}\n\tcode {\n\tfont-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n\t\tmonospace;\n}\n\n      font-size: 14px;\n\n      @media (min-width: 768px) {\n        font-size: 16px;\n      }\n\n      @media (min-width: 1024px) {\n        font-size: 18px;\n      }\n    }\n\n\n.App {\n  background-color: ",";\n  width:100vw;\n\theight:100vh;\n\tmax-height:100%;\n\tmax-width:100%;\n  ","\n}\n.viz-wrapper {\n\twidth:100%;\n\theight:100%;\n\tdisplay:flex;\n\tposition:relative;\n\tpadding-bottom:50px;\n\tpadding-bottom:calc(50px + env(safe-area-inset-bottom));\n\t.title {\n\t\tposition: absolute;\n\t\tpadding-left:1em;\n\t}\n}\n\n.province {\n\tstroke-opacity: 0.5;\n\tstroke-width: 1px;\n\t/* stroke: none; */\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\n&:hover {opacity:0.9;}\n\n}\n.gemeente {\n\tfill-opacity: 1;\n\t\n\t/* stroke: white; */\n}\n.gemeente-borders{\n\tfill: none;\n\tstroke: ",";\n\t","\n\tstroke-linejoin: round;\n\t","\n\tpointer-events: none;\n}\n.provinces {\n\tfill: ",";\n\tstroke: ",";\n\t","\n}\n\n.provinces .active {\n\topacity: .8;\n\ttransition: visibility 0s, opacity 0.3s linear;\n}\n\n.province-borders {\n\tfill: none;\n\tstroke: var(--white);\n\tstroke-width: 1;\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tpointer-events: none;\n}\n\n.gemeente-grens {\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tstroke: ",";\n\tstroke-opacity: 1;\n\t/* stroke-width: 0.1em; */\n\t/* transition-duration: 0.5s; */\n\tfill: ",";\n}\n\n.legend-label {\n\tfont-weight:bold;\n}\n\n    "]);return f=function(){return t},t}var b={darkBlue:"#2F80ED",blue:"#2D9CDB",lightBlue:"#B3E5FC",dark:"#333333",darkGray:"#4F4F4F",midGray:"#828282",lightGray:"#BDBDBD",light:"#E0E0E0",white:"#F2F2F2",darkGreen:"#219653",green:"#27AE60",lightGreen:"#6FCF97",orange:"#F2994A",darkPurple:"#9B51E0",purple:"#BB6BD9",red:"#EB5757",yellow:"#F2C94C"},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1440;return"".concat(t/e*100,"vw")},p=Object(u.createGlobalStyle)(f(),d.normalize,"","","",b.white,"",b.white,"",b.lightGreen,"","",b.lightGreen,b.white,"",b.green,b.lightGreen),v=n(2),h=n(11),g=n(27),O=function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){Object(v.c)(";","https://gist.githubusercontent.com/GiovanniDw/9ebe42d142f40e58e333e546a82f9b0d/raw/5f69fabb70e85ae64cf19633aadd38fcf26a75a4/parkeerData.csv",v.b,(function(t){return function(t){if(t.province)t.province=t.province.replace("Frysl\xe2n","Friesland")}(t),function(t){t.usage=t.usage.replace("park and ride","P+R Parkeerplaats").replace("garage","Parkeergarage").replace("terrain","Parkeerterrein")}(t),t.id=+t.id,t.minimumHeightInMeters=+t.minimumHeightInMeters,t.latitude=+t.latitude,t.longitude=+t.longitude,t.capacity=+t.capacity,t})).then((function(t){(function(t){Object(v.j)(t,(function(t){return t})).keys((function(t){return t.usage}))})(t),function(t){if(t&&null!==t){var e=Object(v.p)(t,(function(t){return Object(g.sum)(t,(function(t){return t.capacity}))}),(function(t){return t.province}));Object(v.o)(t,(function(t){return Object(g.sum)(t,(function(t){return t.capacity}))}),(function(t){return t.usage}))}}(t);return r(t)}))}),[]),n};var m=function(t){var e=Object(a.useState)(x(t?t.current:null)),n=Object(s.a)(e,2),r=n[0],i=n[1],c=Object(a.useCallback)((function(){t.current&&i(x(t.current))}),[t]);return Object(a.useLayoutEffect)((function(){var e=t.current;if(e){if(c(),"function"===typeof ResizeObserver){var n=new ResizeObserver((function(){return c()}));return n.observe(e),function(){n&&(n.disconnect(),n=null)}}return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}}),[t,c]),r};function x(t){return t?t.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0}}var k=Object(a.createContext)(null),y=function(t){var e=t.size,n=t.children,i=t.className;if(e){var c=e.width,o=e.height,l=Object(a.useRef)(null),u=Object(a.useState)(null),d=Object(s.a)(u,2),f=d[0],b=d[1];return Object(a.useEffect)((function(){return b(l.current)}),[e]),Object(r.jsx)("svg",{className:i,ref:l,viewBox:"0 0 ".concat(c," ").concat(o),width:c,height:o,children:Object(r.jsx)(k.Provider,{value:f,children:n})})}};function w(){return Object(a.useContext)(k)}function S(){var t=Object(l.a)(["\n\theight: 100vh;\n\twidth: 100vw;\n\tbackground: ",";\n\tz-index: 4;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]);return S=function(){return t},t}function z(){var t=Object(l.a)(["\n\tanimation: rotate 2s linear infinite;\n\tmargin: -25px 0 0 -25px;\n\twidth: 50px;\n\theight: 50px;\n\n\t& .path {\n\t\tstroke: ",";\n\t\tstroke-linecap: round;\n\t\tanimation: dash 1.5s ease-in-out infinite;\n\t}\n\n\t@keyframes rotate {\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@keyframes dash {\n\t\t0% {\n\t\t\tstroke-dasharray: 1, 150;\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t\t50% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -35;\n\t\t}\n\t\t100% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -124;\n\t\t}\n\t}\n"]);return z=function(){return t},t}var P=function(){return Object(r.jsx)(F,{children:Object(r.jsxs)(N,{viewBox:"0 0 50 50",children:[Object(r.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"}),Object(r.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"}),Object(r.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"})]})})},N=u.default.svg(z(),b.green),F=u.default.div(S(),b.primary);function B(){var t=Object(l.a)(["\n\ttransition-duration: 100ms;\n\t/* fill: ","; */\n\tfill-opacity: 1;\n\t/* stroke: ","; */\n\tstroke-width: 1;\n\t/* stroke-width: ","; */\n\t/* stroke: ","; */\n\t&:hover {\n\t\t/* stroke: ","; */\n\t}\n"]);return B=function(){return t},t}function E(){var t=Object(l.a)(["\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: stretch;\n\tjustify-content: center;\n\tpadding-top: ",";\n\tpadding-left: ",";\n\tpadding-right: ",";\n\tpadding-bottom: ",";\n\tmax-width: 100%;\n\theight: 100%;\n\n\t.map {\n\t\tborder: 1px solid red;\n\t}\n\t.legend {\n\t\tposition: absolute;\n\n\t\tbottom: 0;\n\t\tleft: 10px;\n\t}\n"]);return E=function(){return t},t}var U=u.default.div(E(),j(32),j(32),j(32),j(32)),C=u.default.circle(B(),(function(t){return t.active,b.blue}),(function(t){return t.active?t.fill:b.blue}),(function(t){return t.active?1:3}),(function(t){return t.fill}),(function(t){return b.red})),A=n(60),D=n.n(A),R=n(16),M=function(t){var e=t.colorScale,n=t.tickSpacing,i=void 0===n?25:n,c=t.tickSize,o=void 0===c?8:c,s=t.tickTextOffset,l=void 0===s?-25:s,u=t.onHover,d=t.hoveredUsage,f=t.fadeOpacity,b=t.LegendLabel,j=(t.className,t.dimensions),p=t.sizeScale,h=j.width,g=(j.height,w()),O=Object(a.useRef)();return Object(a.useEffect)((function(){if(g){Object(v.t)(g);var t=Object(v.t)(O.current);t.append("text").text("Capaciteit Parkeergarage").attr("transform","translate(".concat(0,",80)")).attr("class","legend-label");var e=t.append("g").attr("fill","#444").attr("transform","translate(".concat(0,",120)")).attr("text-anchor","end").selectAll("g").data([100,1e3,2400]).join("g");e.append("circle").attr("fill","none").attr("stroke","#444").attr("cy",(function(t){return-p(t)})).attr("r",p),e.append("text").attr("y",(function(t){return-10-2*p(t)})).attr("x",l).attr("dy","1.3em").text(Object(v.d)(".0f")).attr("class","legend-text")}}),[g,O]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("g",{transform:"translate(".concat(h-20,", ",100,")"),textAnchor:"end",children:[Object(r.jsxs)("g",{className:"color-legend",children:[Object(r.jsx)("text",{x:0,y:-25,className:"legend-label",children:b}),e.domain().map((function(t,n){return Object(r.jsxs)("g",{className:"tick",transform:"translate(0,".concat(n*i,")"),onMouseEnter:function(){u(t)},onMouseOut:function(){u(null)},children:[Object(r.jsx)("text",{x:l,dy:".32em",children:t}),Object(r.jsx)(C,{fill:e(t),r:o,opacity:d&&t!==d?f:1})]},n)}))]}),Object(r.jsx)("g",{ref:O,className:"size-legend"})]})})},V=n(61),G=function(t){var e=t.children,n=t.path,i=t.activeProvince,c=t.setActiveProvince,o=w(),l=Object(a.useState)({x:0,y:0,k:1}),u=Object(s.a)(l,2),d=u[0],f=d.x,b=d.y,j=d.k,p=u[1];return Object(a.useEffect)((function(){if(o){var t=Object(v.t)(o),e=t.attr("width"),r=t.attr("height"),a=Object(v.u)().scaleExtent([1,10]).on("zoom",(function(t){var e=t.transform;p(e)})),l=Object(v.t)(i).node();if(i){var u=n.bounds(l),d=Object(s.a)(u,2),f=Object(s.a)(d[0],2),b=f[0],j=f[1],h=Object(s.a)(d[1],2),g=h[0],O=h[1];t.selectAll("path"),t.transition().duration(750).call(a.transform,v.v.translate(e/2,r/2).scale(Math.min(8,.9/Math.max((g-b)/e,(O-j)/r))).translate(-(b+g)/2,-(j+O)/2))}else c(null),t.transition().duration(750).call(a.transform,v.v,Object(v.w)(t).invert([e/2,r/2]));t.call(a)}}),[o,i]),Object(r.jsx)("g",{transform:"translate(".concat(f,", ").concat(b,") scale(").concat(j,")"),strokeWidth:1/j,children:e})};function H(){var t=Object(l.a)(["\n\ttransition-duration: 300ms;\n\t/* fill: ","; */\n\tfill-opacity: 1;\n\t/* stroke: ","; */\n\t/* stroke-width: 0.5; */\n\t/* stroke-width: ","; */\n\t&:hover {\n\t\tstroke: ",";\n\t}\n"]);return H=function(){return t},t}function L(){var t=Object(l.a)(["\n\t/* transition-duration: 700ms; */\n\n\t:hover {\n\t\topacity: 0.7;\n\t}\n"]);return L=function(){return t},t}var I=function(t){var e=t.nld,n=(t.data,t.colorScale,t.colorValue,t.sizeScale,t.sizeValue,t.activeProvince),i=t.activateProvince,c=t.setActiveProvince,o=(t.filteredUsage,t.hoveredUsage,t.fadeOpacity,t.dimensions),l=(e.gemeente,e.gemeenteBorder),u=e.province,d=e.provinceBorder,f=o.width,b=o.height,j=Object(a.useState)(u),p=Object(s.a)(j,2),h=p[0],g=(p[1],Object(v.f)(h)),O=Object(v.e)(h),m=f/Object(v.g)(O[1],O[0])/Math.sqrt(2),x=Object(v.h)().scale(m).center(g),k=Object(v.i)().projection(x);x.translate([f/2,b/2]);var y=function(t){var e=t.active;return Object(r.jsx)(r.Fragment,{children:Object(a.useMemo)((function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("g",{className:"gemeentes",children:Object(r.jsx)("path",{className:"gemeente-borders",d:k(l)})}),Object(r.jsxs)("g",{className:"provinces",children:[u.features.map((function(t){return Object(r.jsx)("path",{active:n?t:void 0,className:e?"province active":"province",d:k(t),onClick:function(){return i(t)},title:t.properties.statnaam},t.id)})),Object(r.jsx)("path",{className:"province-borders",d:k(d)})]})]})}),[k,u,d,l])})};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(G,{setActiveProvince:c,activeProvince:n,path:k,size:o,width:f,height:b,children:[Object(r.jsx)(y,{}),Object(r.jsx)(T,Object(R.a)(Object(R.a)({},t),{},{projection:x}))]})})},T=(u.default.path(L()),function(t){var e=t.data,n=t.projection,i=t.colorScale,c=t.colorValue,o=(t.filteredUsage,t.activeProvince,t.hoveredUsage),l=t.fadeOpacity,u=t.sizeScale,d=t.sizeValue;Object(a.useRef)();return Object(r.jsx)("g",{className:"parking-locations",children:e.map((function(t){var e=n([t.longitude,t.latitude]),a=Object(s.a)(e,2),f=a[0],b=a[1];return Object(r.jsx)(W,{cx:f,cy:b,r:u(d(t)),fill:i(c(t)),value:t.usage,opacity:o&&t.usage!==o?l:.8,children:Object(r.jsxs)("title",{children:[" ",t.name]})},t.id)}))})}),W=Object(u.default)(V.a.circle)(H(),(function(t){return t.active,b.blue}),(function(t){return t.active?b.red:b.blue}),(function(t){return t.active?1:3}),b.white),_=function(t){var e=t.data,n=t.dimensions,i=t.colorScale,c=n.width,o=n.height,s=Object(v.p)(e,(function(t){return t.length}),(function(t){return t.usage})),l=w(),u=Object(a.useRef)(),d=Object(a.useRef)(s),f=m(u);return Object(a.useEffect)((function(){e&&n&&u&&f&&(!function(t){var e=Math.min(c,o)/10-1,n=Object(v.n)().padAngle(0).value((function(t){return t[1]})).sort(null),r=Object(v.a)().innerRadius(20).outerRadius(e),a=n(t),s=n(d.current),l=Object(v.t)(u.current).selectAll("g.arc").data(a);l.exit().remove(),l.enter().append("g").attr("class","arc").append("path").merge(l.select("path.arc")).attr("class","arc").transition().attrTween("d",(function(t,e){var n=Object(v.k)(s[e],t);return function(t){return r(n(t))}})).style("fill",(function(t){return i(t.data[0])})).style("stroke","#ffffff").style("stroke-width",2)}(s),d.current=s)}),[l,e,u,n]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("g",{transform:"translate(".concat(c-10-f.width/2,", ").concat(o-10-f.width/2,")"),children:Object(r.jsx)("g",{ref:u,className:"pie-chart"})})})},J=function(t){var e=t.nld,n=t.data,i=t.filteredUsage,c=t.filteredData,o=t.colorScale,l=t.colorValue,u=t.sizeValue,d=t.hoveredUsage,f=t.fadeOpacity,b=t.children,j=t.activeProvince,p=t.setActiveProvince,h=t.setHoveredUsage,g=(e.gemeente,e.gemeenteBorder,e.province,e.provinceBorder,n.allData,Object(a.useState)(null)),O=Object(s.a)(g,2),x=(O[0],O[1],Object(a.useState)(10)),k=Object(s.a)(x,2),w=k[0],S=k[1],z=Object(a.useRef)(),P=(m(z),D()()),N=Object(s.a)(P,2),F=N[0],B=N[1];console.log(F);var E=Object(v.s)().domain([0,Object(v.m)(n,u)]).range([0,w]);return Object(a.useEffect)((function(){}),[B]),Object(r.jsxs)("div",{className:"viz-wrapper",ref:z,children:[F,Object(r.jsxs)(y,{className:"map",size:B,children:[Object(r.jsx)(I,{nld:e,data:n,colorScale:o,colorValue:l,activeProvince:j,activateProvince:function(t){if(null===j||j!==t)return p(t),void S(5);j===t&&(p(null),S(10))},hoveredUsage:d,filteredUsage:i,fadeOpacity:f,sizeScale:E,sizeValue:u,dimensions:B,setActiveProvince:p}),Object(r.jsx)(M,{className:"legend",data:n,onHover:h,hoveredUsage:d,colorScale:o,colorValue:l,tickSpacing:22,tickSize:8,tickTextOffset:-18,fadeOpacity:.2,LegendLabel:"Soort Parkeermogelijkheid",dimensions:B,sizeScale:E}),Object(r.jsx)(_,{data:c,onHover:h,hoveredUsage:d,filteredUsage:i,colorScale:o,colorValue:l,sizeValue:u,fadeOpacity:.2,setActiveProvince:p,activeProvince:j,setHoveredUsage:h,dimensions:B,sizeScale:E})]}),b]})};function q(){var t=Object(l.a)([""]);return q=function(){return t},t}u.default.g(q());var K=function(){var t=function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){Object(v.l)("https://gist.githubusercontent.com/GiovanniDw/9ebe42d142f40e58e333e546a82f9b0d/raw/1f4e17c5e2a072e12ed5b2dce628413294a13c5e/nl_2020.json").then((function(t){var e=t.objects,n=e.gemeente_2020,a=e.provincie_2020;r({gemeente:Object(h.a)(t,n),gemeenteBorder:Object(h.b)(t,n,(function(t,e){return t!==e})),province:Object(h.a)(t,a),provinceBorder:Object(h.b)(t,a,(function(t,e){return t!==e}))})}))}),[]),n}(),e=O(),n=(function(){var t=Object(a.useState)(null),e=Object(s.a)(t,2),n=e[0],r=e[1];Object(a.useEffect)((function(){Object(v.l)("https://unpkg.com/world-atlas@2.0.2/countries-10m.json").then((function(t){var e=t.objects,n=e.countries,a=e.land;r({land:Object(h.a)(t,a),countries:Object(h.b)(t,n,(function(t,e){return t!==e}))})}))}),[])}(),Object(a.useState)(null)),i=Object(s.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(null),u=Object(s.a)(l,2),d=u[0],f=u[1],j=Object(a.useState)({allData:[],activeUsage:[]}),g=Object(s.a)(j,2),m=(g[0],g[1],Object(a.useRef)());if(!t||!e)return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(P,{})});var x=function(t){return t.usage},k=[b.darkBlue,b.darkGray,b.yellow],y=e.filter((function(t){return c===x(t)})),w=function(){try{return e.filter((function(t){return d.properties.statnaam===function(t){return t.province}(t)}))}catch(t){return e}}(),S=Object(v.r)().domain(e.map(x)).range(k);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(U,{ref:m,children:Object(r.jsx)(J,{nld:t,data:e,hoveredUsage:c,filteredUsage:y,filteredData:w,colorScale:S,colorValue:x,sizeValue:function(t){return t.capacity},fadeOpacity:.2,setActiveProvince:f,activeProvince:d,setHoveredUsage:o,children:Object(r.jsxs)("h1",{className:"title",children:["Parkeer plaatsen van Nederland"," ",Object(r.jsx)("span",{className:"current-province",onClick:function(){return f(null)},children:d?"in ".concat(d.properties.statnaam):""})]})})})}),Object(r.jsx)(p,{})]})},Q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,192)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),i(t),c(t)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),Q()}},[[191,1,2]]]);
//# sourceMappingURL=main.b8116ff3.chunk.js.map