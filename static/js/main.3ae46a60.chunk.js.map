{"version":3,"sources":["GlobalStyles.jsx","hooks/useDataApi.jsx","components/Loading.jsx","components/StyledComponents.jsx","components/SVGContainer.jsx","helpers/useResizeObservers.js","components/Legend.jsx","components/Map/Marks.jsx","components/ZoomContainer.jsx","components/Map/index.jsx","components/Chart.jsx","components/DrawViz/index.jsx","helpers/formatters.jsx","reducers/parkingReducer.jsx","App.jsx","data/useNLD.jsx","data/useWorld.jsx","reportWebVitals.js","index.jsx"],"names":["colors","darkBlue","blue","lightBlue","dark","darkGray","midGray","lightGray","light","white","darkGreen","green","lightGreen","orange","darkPurple","purple","red","yellow","px2vw","size","width","GlobalStyle","createGlobalStyle","normalize","useDataApiD3","initialUrl","initialData","useState","data","setData","url","setUrl","isLoading","setIsLoading","useEffect","cleanParkingData","d","province","replace","cleanProvince","usage","error","console","log","cleanUsage","id","minimumHeightInMeters","latitude","longitude","capacity","a","ls","localStorage","getItem","dsv","autoType","then","setItem","makeAPICall","Loading","StyledLoading","StyledSpinner","viewBox","className","cx","cy","r","fill","strokeWidth","styled","svg","div","primary","Container","Context","circle","props","active","createContext","SVGContainer","children","height","svgRef","useRef","setSvg","current","ref","Provider","value","useSvg","useContext","useDimensions","getRect","rect","setRect","handleResize","useCallback","useLayoutEffect","element","ResizeObserver","resizeObserver","observe","disconnect","window","addEventListener","removeEventListener","getBoundingClientRect","bottom","left","right","top","Legend","colorScale","tickSpacing","tickSize","tickTextOffset","fadeOpacity","onHover","dimensions","LegendLabel","sizeScale","dispatch","activeUsage","allLocations","svgElement","sizeLegendRef","setHoveredUsage","sizeValues","selection","select","selectAll","enter","append","text","attr","exit","remove","sizelegendG","join","format","drawSizeLegend","transform","textAnchor","x","y","domain","map","domainValue","i","onMouseEnter","type","payload","onMouseOut","dy","stroke","fillOpacity","length","Circle","proj","isShowing","opacity","StyledCircle","Marks","projection","sizeValue","colorValue","activeLocations","key","color","includes","name","ZoomContainer","path","activeProvinceFeature","setActiveProvinceFeature","k","setTransform","clientWidth","clientHeight","zoomMap","zoom","scaleExtent","on","event","currentProvince","node","bounds","x0","y0","x1","y1","transition","duration","call","zoomIdentity","translate","scale","Math","min","max","zoomTransform","invert","Map","nld","activateProvince","gemeenteBorder","gemeente","provinceBorder","currentCenter","center","geoCentroid","geoBounds","geoDistance","sqrt","geoMercator","geoPath","features","onClick","title","properties","statnaam","Chart","next","cancel","t","nestedActiveLocations","activeProvince","hoveredUsage","pieChartRef","pieSize","cache","target","__data__","onMouseLeave","dataByUsage","outerRadius","createPie","pie","padAngle","sort","arcGenerator","arc","innerRadius","pieData","prevPieData","selectionWithData","merge","attrTween","interpolator","interpolate","style","drawChart","DrawViz","filteredData","colorRange","maxRadius","containerRef","scaleOrdinal","range","useMemo","scaleSqrt","formatData","maxSizeVal","capacitySizeScale","city","minHeign","nestedData","rollups","v","filterParkingByProvince","filter","parkingReducer","state","action","sortedLocations","b","ascending","filterParkingByUsage","reset","initialState","activeCity","provinces","sizeLegendValues","App","useReducer","parkingData","vizWrapperRef","json","topology","objects","gemeente_2020","provincie_2020","feature","mesh","useNLD","countries","land","useWrld","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3ae46a60.chunk.js","sourcesContent":["import React from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport { normalize } from 'styled-normalize';\n\nexport const colors = {\n\tdarkBlue: '#2F80ED',\n\tblue: '#2D9CDB',\n\tlightBlue: '#B3E5FC',\n\tdark: '#333333',\n\tdarkGray: '#4F4F4F',\n\tmidGray: '#828282',\n\tlightGray: '#BDBDBD',\n\tlight: '#E0E0E0',\n\twhite: '#F2F2F2',\n\tdarkGreen: '#219653',\n\tgreen: '#27AE60',\n\tlightGreen: '#6FCF97',\n\torange: '#F2994A',\n\tdarkPurple: '#9B51E0',\n\tpurple: '#BB6BD9',\n\tred: '#EB5757',\n\tyellow: '#F2C94C',\n};\n\n/**\n * Converts a CSS hex color value to RGBA.\n * @param {string} hex - Expanded hexadecimal CSS color value.\n * @param {number} alpha - Alpha as a decimal.\n * @returns {string} RGBA CSS color value.\n */\nexport const addAlpha = (hex, alpha) => {\n\tconst r = parseInt(hex.substring(1, 3), 16);\n\tconst g = parseInt(hex.substring(3, 5), 16);\n\tconst b = parseInt(hex.substring(5, 7), 16);\n\treturn `rgba(${r}, ${g}, ${b}, ${alpha})`;\n};\n\nexport const px2vw = (size, width = 1440) => `${(size / width) * 100}vw`;\n\nexport const GlobalStyle = createGlobalStyle`\n    ${normalize};\n\n\t* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n  html {\n\t\n\t  box-sizing: border-box;\n        overflow-y: scroll;\n\t\t\n  }\n  #root {\n\t  ${'' /* min-width:100vw; */}\n\t  ${'' /* min-height:100vh; */}\n\t  ${'' /* -webkit-overflow-scrolling: touch; */}\n\t  padding-top: min(16px, env(safe-area-inset-top));\n\t  padding-left: min(16px, env(safe-area-inset-left));\n        padding-right: min(16px, env(safe-area-inset-right));\n        padding-bottom: min(16px, env(safe-area-inset-bottom));\n\t\t\n  }\n  :root {\n\t--safe-area-inset-top   : 16px;\n    --safe-area-inset-right : 16px;\n    --safe-area-inset-bottom: 16px;\n    --safe-area-inset-left  : 16px;  \n\tbody {\n\t\tbackground-color: ${colors.white};\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n\t\t'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n\t\t'Helvetica Neue', sans-serif;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\t${'' /* min-width:100%;\n\tmin-height:100%; */}\n\tmin-width:100%;\n\t\tmin-height:100%;\n\t\n\t}\n\tcode {\n\tfont-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n\t\tmonospace;\n}\n\n      font-size: 14px;\n\n      @media (min-width: 768px) {\n        font-size: 16px;\n      }\n\n      @media (min-width: 1024px) {\n        font-size: 18px;\n      }\n    }\n\n\n.App {\n  background-color: ${colors.white};\n  width:100vw;\n\theight:100vh;\n\tmax-height:100%;\n\tmax-width:100%;\n  ${'' /* margin: 0 auto; */}\n}\n.viz-wrapper {\n\twidth:100%;\n\theight:100%;\n\tdisplay:flex;\n\tposition:relative;\n\tmargin-bottom:150px;\n\tpadding-bottom:calc(50px + env(safe-area-inset-bottom));\n\t.title {\n\t\tposition: absolute;\n\t\tpadding-left:1em;\n\t}\n}\n\n.province {\n\tstroke-opacity: 0.5;\n\tstroke-width: 1px;\n\t/* stroke: none; */\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\n&:hover {opacity:0.9;}\n\n}\n.gemeente {\n\tfill-opacity: 1;\n\t\n\t/* stroke: white; */\n}\n.gemeente-borders{\n\tfill: none;\n\tstroke: ${colors.lightGreen};\n\t${'' /* stroke-width: 1; */}\n\tstroke-linejoin: round;\n\t${'' /* stroke-linecap: round; */}\n\tpointer-events: none;\n}\n.provinces {\n\tfill: ${colors.lightGreen};\n\tstroke: ${colors.white};\n\t${'' /* transition: 0.3s; */}\n\ttransition-duration:600ms;\n}\n\n.provinces .active {\n\n\t\n\topacity: .8;\n\ttransition: visibility 0s, opacity 0.3s linear;\n\ttransition-duration:600ms;\n\tz-index:999;\n\tstroke-width:2;\n\t\n\tstroke-opacity:1;\n\t\n}\n\n.province-borders {\n\ttransition-duration:600ms;\n\tfill: none;\n\tstroke: ${colors.white};\n\tstroke-width: 1;\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tpointer-events: none;\n}\n\n.gemeente-grens {\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tstroke: ${colors.green};\n\tstroke-opacity: 1;\n\t/* stroke-width: 0.1em; */\n\t/* transition-duration: 0.5s; */\n\tfill: ${colors.lightGreen};\n}\n\n.legend-label {\n\tfont-weight:bold;\n}\n\n.zoom-container {\n\t\n}\n\n    `;\n\nexport default GlobalStyle;\n","import { useState, useEffect } from 'react';\nimport {\n\tcsv,\n\tgroup,\n\tdsv,\n\tmap,\n\trollups,\n\trollup,\n\tautoType,\n\tnest,\n\tscaleOrdinal,\n} from 'd3';\n// https://www.robinwieruch.de/react-hooks-fetch-data/\n\nconst cleanProvince = (d) => {\n\tif (!d.province) return;\n\td.province = d.province.replace('FryslÃ¢n', 'Friesland');\n\treturn d;\n};\n\nconst cleanUsage = (d) => {\n\ttry {\n\t\td.usage = d.usage\n\t\t\t.replace('park and ride', 'P+R Parkeerplaats')\n\t\t\t.replace('garage', 'Parkeergarage')\n\t\t\t.replace('terrain', 'Parkeerterrein');\n\n\t\treturn d;\n\t} catch (error) {\n\t\tconsole.log(error);\n\t}\n\n\treturn d;\n};\n// const cleanParkingData = (d) => {\n// \tcleanProvince(d);\n// \tcleanUsage(d);\n// \td.id = +d.id;\n// \td.minimumHeightInMeters = +d.minimumHeightInMeters;\n// \td.latitude = +d.latitude;\n// \td.longitude = +d.longitude;\n// \td.capacity = +d.capacity;\n// \t// console.log(d);\n\n// \treturn d;\n// };\n\nexport const useDataApiD3 = (initialUrl, initialData) => {\n\tconst [data, setData] = useState(initialData);\n\tconst [url, setUrl] = useState(initialUrl);\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tuseEffect(() => {\n\t\tconst cleanParkingData = (d) => {\n\t\t\tcleanProvince(d);\n\t\t\tcleanUsage(d);\n\t\t\td.id = +d.id;\n\t\t\td.minimumHeightInMeters = +d.minimumHeightInMeters;\n\t\t\td.latitude = +d.latitude;\n\t\t\td.longitude = +d.longitude;\n\t\t\td.capacity = +d.capacity;\n\t\t\t// console.log(d);\n\n\t\t\treturn d;\n\t\t};\n\t\tconst makeAPICall = async () => {\n\t\t\tconst ls = localStorage.getItem('data', url);\n\t\t\tif (ls) {\n\t\t\t\tawait dsv(';', ls, autoType, cleanParkingData).then(setData);\n\t\t\t\tconsole.log(true);\n\t\t\t} else {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\ttry {\n\t\t\t\t\tawait dsv(';', url, autoType, cleanParkingData).then(\n\t\t\t\t\t\tsetData\n\t\t\t\t\t);\n\t\t\t\t\tconsole.log(false);\n\t\t\t\t\tlocalStorage.setItem('data', url);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.log('err', err);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsetIsLoading(false);\n\t\t};\n\t\tmakeAPICall();\n\t}, [url]);\n\n\treturn [{ data, isLoading }, setUrl];\n};\n\nexport default useDataApiD3;\n","import React from 'react';\n\nimport styled from 'styled-components';\nimport { colors } from '../GlobalStyles';\nexport const Loading = () => (\n\t<StyledLoading>\n\t\t<StyledSpinner viewBox='0 0 50 50'>\n\t\t\t<circle\n\t\t\t\tclassName='path'\n\t\t\t\tcx='25'\n\t\t\t\tcy='25'\n\t\t\t\tr='20'\n\t\t\t\tfill='none'\n\t\t\t\tstrokeWidth='4'\n\t\t\t/>\n\t\t\t<circle\n\t\t\t\tclassName='path'\n\t\t\t\tcx='25'\n\t\t\t\tcy='25'\n\t\t\t\tr='20'\n\t\t\t\tfill='none'\n\t\t\t\tstrokeWidth='4'\n\t\t\t/>\n\t\t\t<circle\n\t\t\t\tclassName='path'\n\t\t\t\tcx='25'\n\t\t\t\tcy='25'\n\t\t\t\tr='20'\n\t\t\t\tfill='none'\n\t\t\t\tstrokeWidth='4'\n\t\t\t/>\n\t\t</StyledSpinner>\n\t</StyledLoading>\n);\n\nexport const StyledSpinner = styled.svg`\n\tanimation: rotate 2s linear infinite;\n\tmargin: -25px 0 0 -25px;\n\twidth: 50px;\n\theight: 50px;\n\n\t& .path {\n\t\tstroke: ${colors.green};\n\t\tstroke-linecap: round;\n\t\tanimation: dash 1.5s ease-in-out infinite;\n\t}\n\n\t@keyframes rotate {\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@keyframes dash {\n\t\t0% {\n\t\t\tstroke-dasharray: 1, 150;\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t\t50% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -35;\n\t\t}\n\t\t100% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -124;\n\t\t}\n\t}\n`;\n\nconst StyledLoading = styled.div`\n\theight: 100vh;\n\twidth: 100vw;\n\tbackground: ${colors.primary};\n\tz-index: 4;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n","import React from 'react';\n\nimport styled from 'styled-components';\nimport { px2vw, colors } from '../GlobalStyles';\nexport const Container = styled.div`\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: stretch;\n\tjustify-content: center;\n\tpadding-top: ${px2vw(32)};\n\tpadding-left: ${px2vw(32)};\n\tpadding-right: ${px2vw(32)};\n\tpadding-bottom: ${px2vw(32)};\n\tmax-width: 100%;\n\theight: 100%;\n\n\t.map {\n\t\tcolor: red;\n\t}\n\t.legend {\n\t\tposition: absolute;\n\n\t\tbottom: 0;\n\t\tleft: 10px;\n\t}\n`;\n\nexport const StyledCircle = styled.circle`\n\t/* transition-duration: 100ms; */\n\t/* fill: ${(props) => (props.active ? colors.blue : colors.blue)}; */\n\t/* fill-opacity: 1; */\n\t/* stroke: ${(props) => (props.active ? props.fill : colors.blue)}; */\n\tstroke-width: 1;\n\t/* stroke-width: ${(props) => (props.active ? 1 : 3)}; */\n\t/* stroke: ${(props) => props.fill}; */\n\t&:hover {\n\t\t/* stroke: ${(props) => colors.red}; */\n\t}\n`;\n","import React, {\n\tuseEffect,\n\tuseRef,\n\tuseState,\n\tcreateContext,\n\tuseContext,\n} from 'react';\nimport { useSpring, animated } from 'react-spring';\nconst Context = createContext(null);\n\nexport const SVGContainer = (props) => {\n\tconst { size, children, className } = props;\n\n\tconst { width, height } = size;\n\n\tconst svgRef = useRef(null);\n\tconst [svg, setSvg] = useState(null);\n\tuseEffect(() => setSvg(svgRef.current), [size]);\n\treturn (\n\t\t<svg\n\t\t\tclassName={className}\n\t\t\tref={svgRef}\n\t\t\tviewBox={`0 0 ${width} ${height}`}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t>\n\t\t\t<Context.Provider value={svg}>{children}</Context.Provider>\n\t\t</svg>\n\t);\n};\n\nexport function useSvg() {\n\treturn useContext(Context);\n}\n","import {\n\tuseEffect,\n\tuseState,\n\tuseRef,\n\tuseLayoutEffect,\n\tuseCallback,\n} from 'react';\n\nexport const useDimensions = (ref) => {\n\tconst [rect, setRect] = useState(getRect(ref ? ref.current : null));\n\n\tconst handleResize = useCallback(() => {\n\t\tif (!ref.current) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update client rect\n\t\tsetRect(getRect(ref.current));\n\t}, [ref]);\n\n\tuseLayoutEffect(() => {\n\t\tconst element = ref.current;\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\thandleResize();\n\n\t\tif (typeof ResizeObserver === 'function') {\n\t\t\tlet resizeObserver = new ResizeObserver(() => handleResize());\n\t\t\tresizeObserver.observe(element);\n\n\t\t\treturn () => {\n\t\t\t\tif (!resizeObserver) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresizeObserver.disconnect();\n\t\t\t\tresizeObserver = null;\n\t\t\t};\n\t\t} else {\n\t\t\t// Browser support, remove freely\n\t\t\twindow.addEventListener('resize', handleResize);\n\n\t\t\treturn () => {\n\t\t\t\twindow.removeEventListener('resize', handleResize);\n\t\t\t};\n\t\t}\n\t}, [ref, handleResize]);\n\n\treturn rect;\n};\n\nfunction getRect(element) {\n\tif (!element) {\n\t\treturn {\n\t\t\tbottom: 0,\n\t\t\theight: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\ttop: 0,\n\t\t\twidth: 0,\n\t\t};\n\t}\n\n\treturn element.getBoundingClientRect();\n}\n","import React, { useEffect, useRef, useState, useLayoutEffect } from 'react';\nimport { select, format } from 'd3';\nimport { StyledCircle } from './StyledComponents';\nexport const Checkbox = (props) => <input type='checkbox' {...props} />;\nimport {\n\tuseSpring,\n\tuseTransition,\n\tanimated,\n\tuseTrail,\n\tuseSprings,\n} from 'react-spring';\nimport { useSvg } from './SVGContainer';\nimport { size } from 'lodash';\nexport const Legend = ({\n\tcolorScale,\n\ttickSpacing = 25,\n\ttickSize = 8,\n\ttickTextOffset = -25,\n\tonHover,\n\tfadeOpacity,\n\tLegendLabel,\n\tclassName,\n\tdimensions,\n\tsizeScale,\n\tdispatch,\n\tactiveUsage,\n\tallLocations,\n}) => {\n\tconst { width, height } = dimensions;\n\tconst svgElement = useSvg();\n\tconst sizeLegendRef = useRef(null);\n\tconst [hoveredUsage, setHoveredUsage] = useState(null);\n\tconst sizeValues = [100, 1000, 2500];\n\tuseEffect(() => {\n\t\tif (!sizeLegendRef || !sizeScale || !dimensions || !svgElement) return;\n\n\t\tlet circleX = 0;\n\t\tconst selection = select(sizeLegendRef.current);\n\t\tconst drawSizeLegend = () => {\n\t\t\tselection\n\t\t\t\t.selectAll('text')\n\t\t\t\t.enter()\n\t\t\t\t.append('text')\n\t\t\t\t.text('Capaciteit Parkeergarage')\n\t\t\t\t.attr('transform', `translate(${circleX},80)`)\n\t\t\t\t.attr('class', 'legend-label');\n\n\t\t\tselection.selectAll('text').enter().exit().remove();\n\n\t\t\tconst sizelegendG = selection\n\t\t\t\t.selectAll('g')\n\t\t\t\t.data(sizeValues)\n\t\t\t\t.enter()\n\t\t\t\t.append('g')\n\t\t\t\t.attr('fill', '#444')\n\t\t\t\t.attr('transform', `translate(${circleX},130)`)\n\t\t\t\t.attr('text-anchor', 'end')\n\t\t\t\t.join('g');\n\n\t\t\tsizelegendG\n\t\t\t\t.append('circle')\n\t\t\t\t.attr('fill', 'none')\n\t\t\t\t.attr('stroke', '#444')\n\t\t\t\t.attr('cy', (d) => -sizeScale(d))\n\t\t\t\t.attr('r', sizeScale);\n\t\t\tsizelegendG\n\t\t\t\t.append('text')\n\t\t\t\t.attr('y', (d) => -10 - 3 * sizeScale(d))\n\t\t\t\t.attr('x', tickTextOffset)\n\t\t\t\t.attr('dy', '1.3em')\n\t\t\t\t.text(format('.0f'))\n\t\t\t\t.attr('class', 'legend-text');\n\n\t\t\tsizelegendG.selectAll('g').exit().remove();\n\t\t};\n\n\t\treturn drawSizeLegend();\n\t}, [sizeValues, sizeScale, dimensions]);\n\n\treturn (\n\t\t<>\n\t\t\t<g transform={`translate(${width - 20}, ${100})`} textAnchor='end'>\n\t\t\t\t<g className='color-legend'>\n\t\t\t\t\t<text x={0} y={-25} className='legend-label'>\n\t\t\t\t\t\tSoort Parkeermogelijkheid\n\t\t\t\t\t</text>\n\t\t\t\t\t{colorScale.domain().map((domainValue, i) => (\n\t\t\t\t\t\t<g\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName='tick'\n\t\t\t\t\t\t\ttransform={`translate(0,${i * tickSpacing})`}\n\t\t\t\t\t\t\tonMouseEnter={() => {\n\t\t\t\t\t\t\t\tconst usage = domainValue;\n\t\t\t\t\t\t\t\tsetHoveredUsage(domainValue);\n\n\t\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\t\ttype: 'FILTER_PARKING_USAGE',\n\t\t\t\t\t\t\t\t\tpayload: { usage },\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\t\tsetHoveredUsage(null);\n\t\t\t\t\t\t\t\tdispatch({ type: 'RESET_PARKING_USAGE' });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<text x={tickTextOffset} dy='.32em'>\n\t\t\t\t\t\t\t\t{domainValue}\n\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t<circle\n\t\t\t\t\t\t\t\tfill={colorScale(domainValue)}\n\t\t\t\t\t\t\t\tr={tickSize}\n\t\t\t\t\t\t\t\tstroke={colorScale(domainValue)}\n\t\t\t\t\t\t\t\tstrokeWidth='3'\n\t\t\t\t\t\t\t\tfillOpacity={\n\t\t\t\t\t\t\t\t\tactiveUsage && domainValue !== activeUsage\n\t\t\t\t\t\t\t\t\t\t? fadeOpacity\n\t\t\t\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t))}\n\t\t\t\t</g>\n\t\t\t\t{allLocations.length && (\n\t\t\t\t\t<g ref={sizeLegendRef} className='size-legend'>\n\t\t\t\t\t\t<text\n\t\t\t\t\t\t\tclassName='legend-label'\n\t\t\t\t\t\t\ttransform='translate(0, 80)'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCapaciteit Parkeergarage\n\t\t\t\t\t\t</text>\n\t\t\t\t\t</g>\n\t\t\t\t)}\n\t\t\t</g>\n\t\t</>\n\t);\n};\n\nexport default Legend;\n","import React, { useMemo, useState, useRef, useEffect } from 'react';\nimport {\n\tuseSpring,\n\tuseTransition,\n\tanimated,\n\tuseTrail,\n\tuseSprings,\n\tinterpolate,\n\tSpring,\n} from 'react-spring';\nimport { Controls, PlayState, Tween } from 'react-gsap';\nimport { Transition } from 'react-spring/renderprops';\nimport styled from 'styled-components';\nimport { colors, px2vw } from '../../GlobalStyles';\n\nconst Marks = (props) => {\n\tconst {\n\t\tprojection,\n\t\tsizeScale,\n\t\tcolorScale,\n\t\tsizeValue,\n\t\tcolorValue,\n\t\tallLocations,\n\t\tactiveLocations,\n\t} = props;\n\tconst springRef = useRef();\n\t// const style = useSpring({ opacity: 1, from: { opacity: 0 } });\n\tconst [visibleLocations, setVisibleLocations] = useState(true);\n\n\t// useEffect(() => {\n\t// \tif (!filteredUsage || !data) return;\n\t// \t// setVisibleLocations(filteredData);\n\t// \t// hoveredUsage\n\t// \t// \t? setVisibleLocations(filteredUsage)\n\t// \t// \t: setVisibleLocations(data);\n\n\t// \thoveredUsage ? setVisibleLocations(false) : setVisibleLocations(true);\n\t// }, [filteredUsage]);\n\n\treturn (\n\t\t<g className='parking-locations'>\n\t\t\t{allLocations &&\n\t\t\t\tallLocations.map((d) => {\n\t\t\t\t\tconst proj = projection([d.longitude, d.latitude]);\n\t\t\t\t\tconst [x, y] = projection([d.longitude, d.latitude]);\n\t\t\t\t\tconst r = sizeScale(sizeValue(d));\n\t\t\t\t\tconst fill = colorScale(colorValue(d));\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Circle\n\t\t\t\t\t\t\t{...d}\n\t\t\t\t\t\t\tkey={d.id}\n\t\t\t\t\t\t\tproj={proj}\n\t\t\t\t\t\t\tcx={x}\n\t\t\t\t\t\t\tcy={y}\n\t\t\t\t\t\t\tr={r}\n\t\t\t\t\t\t\tfill={d.color}\n\t\t\t\t\t\t\tvalue={d.usage}\n\t\t\t\t\t\t\tactive={activeLocations.includes(d)}\n\t\t\t\t\t\t\t// active={\n\t\t\t\t\t\t\t// \thoveredUsage && d.usage !== hoveredUsage\n\t\t\t\t\t\t\t// \t\t? true\n\t\t\t\t\t\t\t// \t\t: false\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t// opacity={\n\t\t\t\t\t\t\t// \thoveredUsage && d.usage !== hoveredUsage\n\t\t\t\t\t\t\t// \t\t? 0.1\n\t\t\t\t\t\t\t// \t\t: 0.8\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<title> {d.name}</title>\n\t\t\t\t\t\t</Circle>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t</g>\n\t);\n};\n\nconst Circle = (props) => {\n\tconst {\n\t\tvalue,\n\t\tr,\n\t\tfill,\n\t\ttransform,\n\t\tactive,\n\t\tproj,\n\t\tisShowing,\n\t\topacity,\n\t\tcx,\n\t\tcy,\n\t} = props;\n\n\t// const wasActive = useRef(false);\n\n\t// const setState = useSpring({ opacity: 1, from: { opacity: 0 } });\n\n\t// const style = useSpring({\n\t// \tconfig: {\n\t// \t\tduration: 100,\n\t// \t},\n\t// \topacity: active ? 0.8 : 0.1,\n\t// \tr: active ? r : r / 2,\n\t// });\n\n\t// const newStyle = useSpring({\n\t// \topacity: active ? 1 : 0.1,\n\t// \tto: [\n\t// \t\t{ opacity: 1, color: '#ffaaee', r: r },\n\t// \t\t{ opacity: 0, color: 'rgb(14,26,19)', r: 1 },\n\t// \t],\n\t// \tfrom: { opacity: 0, color: 'red', r: r },\n\t// });\n\n\treturn (\n\t\t<StyledCircle\n\t\t\tfill={fill}\n\t\t\tcx={cx}\n\t\t\tcy={cy}\n\t\t\tr={props.active && props.active ? r : 1}\n\t\t\topacity={props.active && props.active ? 0.8 : 0.1}\n\t\t\t// transform={`translate(${proj})`}\n\t\t/>\n\t);\n};\n\nconst StyledCircle = styled.circle`\n\ttransition-duration: 500ms;\n\t/* fill: ${(props) => (props.active ? colors.blue : colors.blue)}; */\n\t/* fill-opacity: 1; */\n\t/* stroke: ${(props) => (props.active ? colors.red : colors.blue)}; */\n\t/* stroke-width: 0.5; */\n\t/* stroke-width: ${(props) => (props.active ? 1 : 3)}; */\n\t&:hover {\n\t\tstroke: ${colors.white};\n\t}\n`;\n\nexport default Marks;\n","import { select, zoom, zoomIdentity, zoomTransform, wheeled } from 'd3';\nimport React, { useState, useEffect, useRef, useLayoutEffect } from 'react';\nimport { useSvg } from './SVGContainer';\n\nexport const ZoomContainer = (props) => {\n\tconst {\n\t\tchildren,\n\t\tpath,\n\t\tactiveProvinceFeature,\n\t\tsetActiveProvinceFeature,\n\t} = props;\n\n\tconst svgElement = useSvg();\n\n\tconst [{ x, y, k }, setTransform] = useState({ x: 0, y: 0, k: 1 });\n\n\tuseEffect(() => {\n\t\tif (!svgElement) return;\n\n\t\tconst svg = select(svgElement);\n\t\tconst width = svgElement.clientWidth;\n\t\tconst height = svgElement.clientHeight;\n\t\tconst zoomed = (event) => {\n\t\t\tconst { transform } = event;\n\t\t\tsetTransform(transform);\n\t\t};\n\t\tconst zoomMap = zoom().scaleExtent([1, 7]).on('zoom', zoomed);\n\t\tconst reset = () => {\n\t\t\t// setActiveProvinceFeature(null);\n\t\t\tsvg.transition()\n\t\t\t\t.duration(750)\n\t\t\t\t.call(\n\t\t\t\t\tzoomMap.transform,\n\t\t\t\t\tzoomIdentity,\n\t\t\t\t\tzoomTransform(svg).invert([width / 2, height / 2])\n\t\t\t\t);\n\t\t};\n\t\tif (activeProvinceFeature) {\n\t\t\tconst currentProvince = select(activeProvinceFeature).node();\n\t\t\tconst [[x0, y0], [x1, y1]] = path.bounds(currentProvince);\n\n\t\t\tsvg.transition()\n\t\t\t\t.duration(750)\n\t\t\t\t.call(\n\t\t\t\t\tzoomMap.transform,\n\t\t\t\t\tzoomIdentity\n\t\t\t\t\t\t.translate(width / 2, height / 2)\n\t\t\t\t\t\t.scale(\n\t\t\t\t\t\t\tMath.min(\n\t\t\t\t\t\t\t\t8,\n\t\t\t\t\t\t\t\t0.9 /\n\t\t\t\t\t\t\t\t\tMath.max(\n\t\t\t\t\t\t\t\t\t\t(x1 - x0) / width,\n\t\t\t\t\t\t\t\t\t\t(y1 - y0) / height\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.translate(-(x0 + x1) / 2, -(y0 + y1) / 2)\n\t\t\t\t);\n\t\t} else {\n\t\t\treset();\n\t\t}\n\t\tsvg.call(zoomMap);\n\t\treturn;\n\t}, [svgElement, activeProvinceFeature]);\n\n\treturn (\n\t\t<g\n\t\t\tclassName='zoom-container'\n\t\t\ttransform={`translate(${x}, ${y}) scale(${k})`}\n\t\t\tstrokeWidth={2 / k}\n\t\t>\n\t\t\t{children}\n\t\t</g>\n\t);\n};\n","import React, { useMemo, useState, useRef, useEffect } from 'react';\nimport {\n\tuseSpring,\n\tuseTransition,\n\tanimated,\n\tuseTrail,\n\tuseSprings,\n\tinterpolate,\n\tSpring,\n} from 'react-spring';\nimport { Controls, PlayState, Tween } from 'react-gsap';\nimport { Transition } from 'react-spring/renderprops';\nimport styled from 'styled-components';\nimport { colors, px2vw } from '../../GlobalStyles';\nimport { geoMercator, geoPath, geoCentroid, geoBounds, geoDistance } from 'd3';\nimport Marks from './Marks';\nimport { ZoomContainer } from '../ZoomContainer';\nimport { useSvg } from '../SVGContainer';\nexport const Map = (props) => {\n\tconst {\n\t\tnld,\n\t\tactiveProvinceFeature,\n\t\tactivateProvince,\n\t\tsetActiveProvinceFeature,\n\t\tdimensions,\n\t} = props;\n\tconst { gemeente, gemeenteBorder, province, provinceBorder } = nld;\n\tconst { width, height } = dimensions;\n\tconst svgElement = useSvg();\n\tconst pathRef = useRef();\n\tconst [currentCenter, setCurrentCenter] = useState(province);\n\tconst center = geoCentroid(currentCenter);\n\tconst bounds = geoBounds(currentCenter);\n\tconst distance = geoDistance(bounds[1], bounds[0]);\n\tconst scale = height + width / distance / Math.sqrt(2);\n\n\tconst projection = geoMercator()\n\t\t.scale(scale)\n\t\t.center(center)\n\t\t.translate([width / 2, height / 2]);\n\n\tconst path = geoPath().projection(projection);\n\n\tconst renderNL = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<g className='gemeentes'>\n\t\t\t\t\t<path\n\t\t\t\t\t\tclassName='gemeente-borders'\n\t\t\t\t\t\td={path(gemeenteBorder)}\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\n\t\t\t\t<g className='provinces'>\n\t\t\t\t\t{province.features.map((d) => (\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tkey={d.id}\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\tactiveProvinceFeature === d\n\t\t\t\t\t\t\t\t\t? 'province active'\n\t\t\t\t\t\t\t\t\t: 'province'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\td={path(d)}\n\t\t\t\t\t\t\tonClick={() => activateProvince(d)}\n\t\t\t\t\t\t\ttitle={d.properties.statnaam}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\n\t\t\t\t\t<path\n\t\t\t\t\t\tclassName='province-borders'\n\t\t\t\t\t\td={path(provinceBorder)}\n\t\t\t\t\t/>\n\t\t\t\t</g>\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<ZoomContainer\n\t\t\t\t{...nld}\n\t\t\t\tsetActiveProvinceFeature={setActiveProvinceFeature}\n\t\t\t\tactiveProvinceFeature={activeProvinceFeature}\n\t\t\t\tpath={path}\n\t\t\t\tsize={dimensions}\n\t\t\t\twidth={width}\n\t\t\t\theight={height}\n\t\t\t>\n\t\t\t\t{props.nld && renderNL()}\n\t\t\t\t<Marks {...props} projection={projection} />\n\t\t\t</ZoomContainer>\n\t\t</>\n\t);\n};\n\nconst StyledProvincePath = styled.path`\n\ttransition-duration: 700ms;\n\n\t:hover {\n\t\topacity: 0.7;\n\t}\n`;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { select, pie, arc, rollups, interpolate } from 'd3';\nimport { animated, useSpring } from 'react-spring';\nimport { useSvg } from './SVGContainer';\n\nimport { useDimensions } from '../helpers/useResizeObservers';\n\nconst animationDuration = 250;\nconst animationConfig = {\n\tto: async (next, cancel) => {\n\t\tawait next({ t: 1 });\n\t},\n\tfrom: { t: 0 },\n\tconfig: { duration: animationDuration },\n\treset: true,\n};\n\nexport const Chart = (props) => {\n\tconst {\n\t\tdata,\n\t\tdimensions,\n\t\tcolorScale,\n\t\tonHover,\n\t\tnestedActiveLocations,\n\t\tactiveProvince,\n\t\tdispatch,\n\t\tactiveUsage,\n\t} = props;\n\tconst { width, height } = dimensions;\n\n\tconst svgElement = useSvg();\n\tconst [hoveredUsage, setHoveredUsage] = useState(1);\n\tconst pieChartRef = useRef(null);\n\n\tconst pieSize = useDimensions(pieChartRef);\n\tconst cache = useRef(nestedActiveLocations);\n\n\tconst onMouseEnter = (d) => {\n\t\tconst usage = d.target.__data__.data[0];\n\t\t// select().attr('opacity', 0.5);\n\t\tdispatch({ type: 'FILTER_PARKING_USAGE', payload: { usage } });\n\n\t\tsetHoveredUsage(d);\n\t};\n\tconst onMouseLeave = () => {\n\t\tdispatch({ type: 'RESET_PARKING_USAGE' });\n\t};\n\n\tuseEffect(() => {\n\t\tif (!dimensions || !pieChartRef || !pieSize) return;\n\n\t\t// const dataByUsage = rollups(\n\t\t// \tdata,\n\t\t// \t(v) => v.length,\n\t\t// \t(d) => d.usage\n\t\t// );\n\t\t// cache.current = dataByUsage;\n\n\t\tconst drawChart = (dataByUsage, activeUsage) => {\n\t\t\tconst outerRadius = Math.min(width, height) / 10 - 1;\n\n\t\t\tconst createPie = pie()\n\t\t\t\t.padAngle(0)\n\t\t\t\t.value((d) => d[1])\n\t\t\t\t.sort(null);\n\t\t\tconst arcGenerator = arc().innerRadius(20).outerRadius(outerRadius);\n\n\t\t\tconst pieData = createPie(dataByUsage);\n\t\t\tconst prevPieData = createPie(cache.current);\n\n\t\t\tconst selection = select(pieChartRef.current);\n\t\t\tconst selectionWithData = selection\n\t\t\t\t.selectAll('g.arc')\n\t\t\t\t.data(pieData);\n\t\t\tselectionWithData.exit().remove();\n\n\t\t\tconst selectionWidthUpdate = selectionWithData\n\t\t\t\t.enter()\n\t\t\t\t.append('g')\n\t\t\t\t.attr('class', 'arc')\n\t\t\t\t.on('mouseenter', onMouseEnter)\n\t\t\t\t.on('mouseleave', onMouseLeave)\n\t\t\t\t.attr('opacity', hoveredUsage);\n\n\t\t\tconst path = selectionWidthUpdate\n\t\t\t\t.append('path')\n\t\t\t\t.merge(selectionWithData.select('path.arc'));\n\n\t\t\tconst arcTween = (d, i) => {\n\t\t\t\tconst interpolator = interpolate(prevPieData[i], d);\n\t\t\t\treturn (t) => arcGenerator(interpolator(t));\n\t\t\t};\n\n\t\t\tpath.attr('class', 'arc')\n\t\t\t\t.transition()\n\t\t\t\t.attrTween('d', arcTween)\n\t\t\t\t.attr('value', (i) => i.data[0])\n\t\t\t\t.style('fill', (i) => colorScale(i.data[0]))\n\t\t\t\t.attr('classed', (i) =>\n\t\t\t\t\tactiveUsage == i.data[0] ? 'true' : 'false'\n\t\t\t\t)\n\t\t\t\t.style('stroke', '#ffffff')\n\t\t\t\t.style('stroke-width', 2);\n\t\t};\n\t\tdrawChart(nestedActiveLocations, activeUsage);\n\t\tcache.current = nestedActiveLocations;\n\t\treturn;\n\t}, [svgElement, nestedActiveLocations, dimensions]);\n\n\treturn (\n\t\t<>\n\t\t\t<g\n\t\t\t\ttransform={`translate(${width - 10 - pieSize.width / 2}, ${\n\t\t\t\t\theight - 10 - pieSize.width / 2\n\t\t\t\t})`}\n\t\t\t>\n\t\t\t\t<g ref={pieChartRef} className='arc'></g>\n\t\t\t</g>\n\t\t</>\n\t);\n};\n\nexport default Chart;\n","import React, { useRef, useState, useEffect, useMemo } from 'react';\n\nimport { SVGContainer } from '../SVGContainer';\n\nimport { useDimensions, useBbox } from '../../helpers/useResizeObservers';\nimport useMeasure from '../../hooks/useMeasure';\nimport Legend from '../Legend';\nimport { Map } from '../Map';\nimport { max, scaleSqrt, scaleOrdinal, scaleLinear } from 'd3';\n\nimport Chart from '../Chart';\n\nexport const DrawViz = (props) => {\n\tconst {\n\t\tnld,\n\t\tdata,\n\t\tfilteredData,\n\t\thoveredUsage,\n\t\tfadeOpacity,\n\t\tchildren,\n\t\tsetHoveredUsage,\n\t\tcolorRange,\n\t\tallLocations,\n\t\tdispatch,\n\t} = props;\n\tconst { gemeente, gemeenteBorder, province, provinceBorder } = nld;\n\t// const { allData } = data;\n\tconst [activeCity, setActiveCity] = useState(null);\n\tconst [maxRadius, setMaxradius] = useState(10);\n\tconst containerRef = useRef();\n\tconst dimensions = useDimensions(containerRef);\n\tconst [activeProvinceFeature, setActiveProvinceFeature] = useState(null);\n\n\tconst sizeValue = (d) => d.capacity;\n\tconst colorValue = (d) => d.usage;\n\n\tconst colorScale = scaleOrdinal()\n\t\t.domain(allLocations.map(colorValue))\n\t\t.range(colorRange);\n\n\tconst sizeScale = useMemo(\n\t\t() =>\n\t\t\tscaleSqrt()\n\t\t\t\t.domain([0, max(allLocations, sizeValue)])\n\t\t\t\t.range([0, maxRadius]),\n\t\t[allLocations, sizeValue, maxRadius]\n\t);\n\n\tconst activateProvince = (d) => {\n\t\tconst province = d.properties.statnaam;\n\t\tif (activeProvinceFeature === null || activeProvinceFeature !== d) {\n\t\t\tsetActiveProvinceFeature(d);\n\t\t\t// setMaxradius(5);\n\t\t\tprops.dispatch({\n\t\t\t\ttype: 'FILTER_ACTIVE_PROVINCE',\n\t\t\t\tpayload: { province },\n\t\t\t});\n\t\t} else if (activeProvinceFeature === d) {\n\t\t\tsetActiveProvinceFeature(null);\n\t\t\t// setMaxradius(10);\n\t\t\tprops.dispatch({ type: 'RESET' });\n\t\t}\n\t};\n\n\tconst activateCity = (d) => {\n\t\tif (activeCity === null || activeCity !== d.city) {\n\t\t\treturn setActiveCity(d.city);\n\t\t}\n\t\tif (activeCity === d.city) {\n\t\t\treturn setActiveCity(null);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (!dimensions) return;\n\t}, [dimensions]);\n\n\treturn (\n\t\t<div className='viz-wrapper' ref={containerRef}>\n\t\t\t<SVGContainer className='map' size={dimensions}>\n\t\t\t\t<Map\n\t\t\t\t\t{...props}\n\t\t\t\t\tnld={nld}\n\t\t\t\t\tcolorScale={colorScale}\n\t\t\t\t\tcolorValue={colorValue}\n\t\t\t\t\tactiveProvinceFeature={activeProvinceFeature}\n\t\t\t\t\tactivateProvince={activateProvince}\n\t\t\t\t\tfadeOpacity={0.2}\n\t\t\t\t\tsizeScale={sizeScale}\n\t\t\t\t\tsizeValue={sizeValue}\n\t\t\t\t\tdimensions={dimensions}\n\t\t\t\t\tsetActiveProvinceFeature={setActiveProvinceFeature}\n\t\t\t\t/>\n\t\t\t\t{sizeScale && (\n\t\t\t\t\t<Legend\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tclassName='legend'\n\t\t\t\t\t\tcolorScale={colorScale}\n\t\t\t\t\t\tcolorValue={colorValue}\n\t\t\t\t\t\ttickSpacing={22}\n\t\t\t\t\t\ttickSize={8}\n\t\t\t\t\t\ttickTextOffset={-18}\n\t\t\t\t\t\tfadeOpacity={0.2}\n\t\t\t\t\t\tdimensions={dimensions}\n\t\t\t\t\t\tsizeScale={sizeScale}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\n\t\t\t\t<Chart\n\t\t\t\t\t{...props}\n\t\t\t\t\tcolorScale={colorScale}\n\t\t\t\t\tcolorValue={colorValue}\n\t\t\t\t\tsizeValue={sizeValue}\n\t\t\t\t\tfadeOpacity={0.2}\n\t\t\t\t\tsetActiveProvinceFeature={setActiveProvinceFeature}\n\t\t\t\t\tactiveProvinceFeature={activeProvinceFeature}\n\t\t\t\t\tsetHoveredUsage={setHoveredUsage}\n\t\t\t\t\tdimensions={dimensions}\n\t\t\t\t\tsizeScale={sizeScale}\n\t\t\t\t/>\n\t\t\t</SVGContainer>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default DrawViz;\n","import {\n\tselect,\n\tpie,\n\tarc,\n\trollups,\n\trollup,\n\tinterpolate,\n\tscaleOrdinal,\n\tscaleSqrt,\n\tmax,\n} from 'd3';\n\nimport React, { useMemo } from 'react';\n\nimport { GlobalStyle, colors, px2vw } from '../GlobalStyles';\n\n// const [maxRadius, setMaxradius] = useState(10);\n\nexport const colorRange = [colors.darkBlue, colors.darkGray, colors.yellow];\nconst colorValue = (d) => d.usage;\nconst sizeValue = (d) => d.capacity;\nexport const provinceValue = (d) => d.province;\nconst maxRadius = 10;\n\n// export const colorScale = () =>\n// \tscaleOrdinal().domain(data.map(colorValue)).range(colorRange);\n\n// export const sizeScale = () =>\n// \tscaleSqrt()\n// \t\t.domain([0, max(data, sizeValue)])\n// \t\t.range([0, maxRadius]);\n\nexport const formatData = (data) => {\n\tconst maxSizeVal = max(data, sizeValue);\n\n\tconst colorScale = scaleOrdinal()\n\t\t.domain(data.map(colorValue))\n\t\t.range(colorRange);\n\n\tconst capacitySizeScale = scaleSqrt()\n\t\t.domain([0, maxSizeVal])\n\t\t.range([0, maxRadius]);\n\n\treturn data.map((d) => {\n\t\t// const sizeScaleValue = (d) => sizeScale(sizeValue(d));\n\t\t// const colorScaleValue = (d) => colorScale(colorValue(d));\n\t\t// console.log(colorScaleValue);\n\n\t\treturn {\n\t\t\tid: d.id,\n\t\t\tname: d.name,\n\t\t\tprovince: d.province,\n\t\t\tusage: d.usage,\n\t\t\tcity: d.city,\n\t\t\tlatitude: d.latitude,\n\t\t\tlongitude: d.longitude,\n\t\t\tcapacity: d.capacity,\n\t\t\tminHeign: d.minimumHeightInMeters,\n\t\t\tactive: false,\n\t\t\tcolor: colorScale(colorValue(d)),\n\t\t\tcapacitySizeScale: capacitySizeScale(sizeValue(d)),\n\t\t\t// sizeScale: sizeScaleValue,\n\t\t\t// colorScale: colorScaleValue,\n\t\t};\n\t});\n};\n\nexport const nestedData = (data) => {\n\tconst nested = rollups(\n\t\tdata,\n\t\t(v) => v.length,\n\t\t(d) => d.usage\n\t);\n\treturn nested;\n};\n\nexport const filterParkingByUsage = (d, filter) => d.usage === filter;\nexport const filterParkingByProvince = (d, filter) => d.province === filter;\nexport const filterParkingByCity = (d, filter) => d.city === filter;\nexport const resetParkingFilter = (d) => {\n\td.active = false;\n\treturn d;\n};\n\n// export const colorScale (d) => scaleOrdinal()\n","/* eslint-disable indent */\nimport { filter } from 'lodash';\nimport React from 'react';\nimport { max, scaleSqrt, scaleOrdinal, ascending } from 'd3';\nimport {\n\tfilterParkingByUsage,\n\tfilterParkingByProvince,\n\tfilterParkingByCity,\n\tresetParkingFilter,\n\tnestedData,\n} from '../helpers/formatters';\n\nconst parkingReducer = (state, action) => {\n\tlet activeLocations;\n\tlet nestedActiveLocations;\n\tlet activeUsage;\n\tlet activeCity;\n\tlet province;\n\tlet usage;\n\tlet sortedLocations;\n\n\tswitch (action.type) {\n\t\tcase 'INITIAL_API_CALL':\n\t\t\t// activeLocations = action.payload.data.filter((d) => filterParkingByUsage)\n\t\t\tsortedLocations = action.payload.data.sort((a, b) =>\n\t\t\t\tascending(a.usage, b.usage)\n\t\t\t);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tallLocations: action.payload.data,\n\t\t\t\tactiveLocations: action.payload.data,\n\t\t\t\tnestedActiveLocations: nestedData(sortedLocations),\n\t\t\t};\n\t\tcase 'FILTER_PARKING_USAGE':\n\t\t\tusage = action.payload.usage;\n\t\t\tactiveLocations = state.allLocations.filter((d) =>\n\t\t\t\tfilterParkingByUsage(d, usage)\n\t\t\t);\n\n\t\t\tif (state.activeProvince !== null) {\n\t\t\t\tactiveLocations = activeLocations.filter((d) =>\n\t\t\t\t\tfilterParkingByProvince(d, state.activeProvince)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveLocations,\n\t\t\t\tactiveUsage: usage,\n\t\t\t};\n\t\tcase 'RESET_PARKING_USAGE':\n\t\t\tif (state.activeProvince !== null) {\n\t\t\t\tactiveLocations = state.allLocations.filter((d) =>\n\t\t\t\t\tfilterParkingByProvince(d, state.activeProvince)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tactiveLocations = state.allLocations;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveLocations,\n\t\t\t\tactiveUsage: null,\n\t\t\t};\n\n\t\tcase 'FILTER_ACTIVE_PROVINCE':\n\t\t\tprovince = action.payload.province;\n\t\t\tif (province !== null) {\n\t\t\t\tactiveLocations = state.allLocations.filter((d) =>\n\t\t\t\t\tfilterParkingByProvince(d, province)\n\t\t\t\t);\n\t\t\t\t// .filter((d) => filterParkingByUsage(d, state.activeUsage));\n\t\t\t\t// } else if (province === state.activeProvince) {\n\t\t\t\t// \tprovince = null;\n\t\t\t\tnestedActiveLocations = nestedData(state.activeLocations);\n\t\t\t} else {\n\t\t\t\tactiveLocations = state.allLocations.filter((d) =>\n\t\t\t\t\tfilterParkingByProvince(d, province)\n\t\t\t\t);\n\t\t\t\tnestedActiveLocations = nestedData(state.allLocations);\n\t\t\t}\n\t\t\tsortedLocations = activeLocations.sort((a, b) =>\n\t\t\t\tascending(a.usage, b.usage)\n\t\t\t);\n\t\t\tnestedActiveLocations = nestedData(sortedLocations);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveLocations,\n\t\t\t\tnestedActiveLocations,\n\t\t\t\tactiveProvince: province,\n\t\t\t};\n\t\tcase 'RESET':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tactiveLocations: state.allLocations,\n\t\t\t\tnestedActiveLocations: nestedData(state.allLocations),\n\t\t\t\tactiveProvince: null,\n\t\t\t\tactiveUsage: null,\n\t\t\t\treset: false,\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default parkingReducer;\n","/* eslint-disable indent */\n/* eslint-disable no-mixed-spaces-and-tabs */\nimport React, { useState, useRef, useEffect, useMemo, useReducer } from 'react';\n\nimport { GlobalStyle, colors, px2vw } from './GlobalStyles.jsx';\nimport { useNLD } from './data/useNLD';\n\nimport { useWrld } from './data/useWorld';\nimport { useDataApiD3 } from './hooks/useDataApi';\n\nimport { Loading } from './components/Loading';\nimport { Container } from './components/StyledComponents';\nimport DrawViz from './components/DrawViz/';\n\nimport { formatData } from './helpers/formatters';\n\nimport parkingReducer from './reducers/parkingReducer';\n\nconst initialState = {\n\tallLocations: [],\n\tactiveLocations: [],\n\tnestedActiveLocations: [],\n\tactiveUsage: null,\n\tactiveCity: [],\n\tactiveProvince: null,\n\tprovinces: [],\n\tsizeScale: [],\n\tsizeLegendValues: [],\n\tcolorRange: [colors.darkBlue, colors.darkGray, colors.yellow],\n\treset: false,\n};\n\nexport const App = () => {\n\tconst [olddata, setData] = useState();\n\n\tconst [parkingData, dispatch] = useReducer(parkingReducer, initialState);\n\tconst [{ data, isLoading }] = useDataApiD3(\n\t\t'https://gist.githubusercontent.com/GiovanniDw/9ebe42d142f40e58e333e546a82f9b0d/raw/5f69fabb70e85ae64cf19633aadd38fcf26a75a4/parkeerData.csv',\n\t\t[]\n\t);\n\n\tconst vizWrapperRef = useRef();\n\n\tconst nld = useNLD();\n\t// const getData = useParkingData();\n\tconst wrld = useWrld();\n\n\tuseEffect(() => {\n\t\tif (data.length) {\n\t\t\tdispatch({\n\t\t\t\ttype: 'INITIAL_API_CALL',\n\t\t\t\tpayload: { data: formatData(data) },\n\t\t\t});\n\t\t}\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className='App'>\n\t\t\t\t<Container ref={vizWrapperRef}>\n\t\t\t\t\t{isLoading || !nld ? (\n\t\t\t\t\t\t<Loading />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<DrawViz\n\t\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\t\tnld={nld}\n\t\t\t\t\t\t\t{...parkingData}\n\t\t\t\t\t\t\tdispatch={dispatch}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h1 className='title'>\n\t\t\t\t\t\t\t\tParkeer plaatsen van Nederland{' '}\n\t\t\t\t\t\t\t\t{/* <span\n\t\t\t\t\t\t\t\t\tclassName='current-province'\n\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\tsetActiveProvinceFeature(null)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{parkingData.activeProvince\n\t\t\t\t\t\t\t\t\t\t? `in ${parkingData.activeProvince}`\n\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t</span> */}\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</DrawViz>\n\t\t\t\t\t)}\n\t\t\t\t</Container>\n\t\t\t</div>\n\t\t\t<GlobalStyle />\n\t\t</>\n\t);\n};\n\nexport default App;\n","import { useState, useEffect } from 'react';\nimport { json } from 'd3';\nimport { feature, mesh } from 'topojson-client';\n\nconst jsonNLD =\n\t'https://gist.githubusercontent.com/GiovanniDw/9ebe42d142f40e58e333e546a82f9b0d/raw/1f4e17c5e2a072e12ed5b2dce628413294a13c5e/nl_2020.json';\n\nexport const useNLD = () => {\n\tconst [data, setData] = useState(null);\n\tuseEffect(() => {\n\t\tjson(jsonNLD).then((topology) => {\n\t\t\tconst { gemeente_2020, provincie_2020 } = topology.objects;\n\t\t\tsetData({\n\t\t\t\tgemeente: feature(topology, gemeente_2020),\n\t\t\t\tgemeenteBorder: mesh(\n\t\t\t\t\ttopology,\n\t\t\t\t\tgemeente_2020,\n\t\t\t\t\t(a, b) => a !== b\n\t\t\t\t),\n\t\t\t\tprovince: feature(topology, provincie_2020),\n\t\t\t\tprovinceBorder: mesh(\n\t\t\t\t\ttopology,\n\t\t\t\t\tprovincie_2020,\n\t\t\t\t\t(a, b) => a !== b\n\t\t\t\t),\n\t\t\t});\n\t\t});\n\t}, []);\n\treturn data;\n};\n","import { useState, useEffect } from 'react';\nimport { json } from 'd3';\nimport { feature, mesh } from 'topojson-client';\n\nconst jsonWrld = 'https://unpkg.com/world-atlas@2.0.2/countries-10m.json';\n        \n\nexport const useWrld = () => {\n\tconst [data, setData] = useState(null);\n\tuseEffect(() => {\n\t\tjson(jsonWrld).then(topology => {\n\t\t\tconst { countries, land } = topology.objects;\n\t\t\tsetData({\n\t\t\t\tland: feature(topology, land),\n\t\t\t\tcountries: mesh(topology, countries, (a, b) => a !== b)\n\t\t\t});\n\t\t});\n\t}, []);\n\treturn data;\n};","const reportWebVitals = (onPerfEntry) => {\n\tif (onPerfEntry && onPerfEntry instanceof Function) {\n\t\timport('web-vitals').then(\n\t\t\t({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n\t\t\t\tgetCLS(onPerfEntry);\n\t\t\t\tgetFID(onPerfEntry);\n\t\t\t\tgetFCP(onPerfEntry);\n\t\t\t\tgetLCP(onPerfEntry);\n\t\t\t\tgetTTFB(onPerfEntry);\n\t\t\t}\n\t\t);\n\t}\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}