(this["webpackJsonpfrontend-applications"]=this["webpackJsonpfrontend-applications"]||[]).push([[0],{181:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n.n(a),c=n(50),o=n.n(c),s=n(3),l=(n(49),n(5)),u=n(4),d=n(51);function f(){var e=Object(l.a)(["\n    ",";\n\n\t* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n  }\n  html {\n\t\n\t  box-sizing: border-box;\n        overflow-y: scroll;\n\t\t\n  }\n  #root {\n\t  ","\n\t  ","\n\t  ","\n\t  padding-top: min(16px, env(safe-area-inset-top));\n\t  padding-left: min(16px, env(safe-area-inset-left));\n        padding-right: min(16px, env(safe-area-inset-right));\n        padding-bottom: min(16px, env(safe-area-inset-bottom));\n\t\t\n  }\n  :root {\n\t--safe-area-inset-top   : 16px;\n    --safe-area-inset-right : 16px;\n    --safe-area-inset-bottom: 16px;\n    --safe-area-inset-left  : 16px;  \n\tbody {\n\t\tbackground-color: ",";\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto',\n\t\t'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n\t\t'Helvetica Neue', sans-serif;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\t","\n\tmin-width:100vw;\n\t\tmin-height:100vh;\n\t\n\t}\n\tcode {\n\tfont-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n\t\tmonospace;\n}\n\n      font-size: ",";\n\n      @media (min-width: 768px) {\n        font-size: ",";\n      }\n\n      @media (min-width: 1024px) {\n        font-size: ",";\n      }\n    }\n\n\n.App {\n  background-color: ",";\n  max-width:100vw;\n\tmax-height:100vh;\n  ","\n}\n.viz-wrapper {\n\twidth:100%;\n\theight:100%;\n\tdisplay:flex;\n\tposition:relative;\n\n\t.title {\n\t\tposition: absolute;\n\t\tpadding-left:1em;\n\t}\n}\n\n.province {\n\tstroke-opacity: 0.5;\n\tstroke-width: 1px;\n\t/* stroke: none; */\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n}\n.gemeente {\n\tfill-opacity: 1;\n\t\n\t/* stroke: white; */\n}\n.gemeente-borders{\n\tfill: none;\n\tstroke: ",";\n\t","\n\tstroke-linejoin: round;\n\t","\n\tpointer-events: none;\n}\n.provinces {\n\tfill: ",";\n\tstroke: ",";\n\t","\n}\n\n.provinces .active {\n\topacity: .8;\n\ttransition: visibility 0s, opacity 0.3s linear;\n}\n\n.province-borders {\n\tfill: none;\n\tstroke: var(--white);\n\tstroke-width: 1;\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tpointer-events: none;\n}\n\n.gemeente-grens {\n\tstroke-linejoin: round;\n\tstroke-linecap: round;\n\tstroke: ",";\n\tstroke-opacity: 1;\n\t/* stroke-width: 0.1em; */\n\t/* transition-duration: 0.5s; */\n\tfill: ",";\n}\n\n    "]);return f=function(){return e},e}var j={darkBlue:"#2F80ED",blue:"#2D9CDB",lightBlue:"#B3E5FC",dark:"#333333",darkGray:"#4F4F4F",midGray:"#828282",lightGray:"#BDBDBD",light:"#E0E0E0",white:"#F2F2F2",darkGreen:"#219653",green:"#27AE60",lightGreen:"#6FCF97",orange:"#F2994A",darkPurple:"#9B51E0",purple:"#BB6BD9",red:"#EB5757",yellow:"#F2C94C"},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1440;return"".concat(e/t*100,"vw")},h=Object(u.createGlobalStyle)(f(),d.normalize,"","","",j.white,"",b(30),b(35),b(40),j.white,"",j.lightGreen,"","",j.lightGreen,j.white,"",j.green,j.lightGreen),v=n(2),p=n(7),g=n(24),O=function(e){if(e&&null!==e){var t=Object(v.o)(e,(function(e){return Object(g.sum)(e,(function(e){return e.capacity}))}),(function(e){return e.province}));Object(v.n)(e,(function(e){return Object(g.sum)(e,(function(e){return e.capacity}))}),(function(e){return e.usage}));return t}},m=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(v.c)(";","https://gist.githubusercontent.com/GiovanniDw/9ebe42d142f40e58e333e546a82f9b0d/raw/5f69fabb70e85ae64cf19633aadd38fcf26a75a4/parkeerData.csv",v.b,(function(e){return function(e){if(e.province)e.province=e.province.replace("Frysl\xe2n","Friesland")}(e),function(e){e.usage=e.usage.replace("park and ride","P+R Parkeerplaats").replace("garage","Parkeergarage").replace("terrain","Parkeerterrein")}(e),e.id=+e.id,e.minimumHeightInMeters=+e.minimumHeightInMeters,e.latitude=+e.latitude,e.longitude=+e.longitude,e.capacity=+e.capacity,e})).then((function(e){var t=function(e){return Object(v.j)(e,(function(e){return e})).keys((function(e){return e.usage}))}(e);r({allData:e,byUsage:O(e),nested:t})}))}),[]),n};function x(e){return e?e.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0}}var k=Object(a.createContext)(null),y=function(e){var t=e.size,n=e.children,i=e.className;if(t){var c=t.width,o=t.height,l=Object(a.useRef)(null),u=Object(a.useState)(null),d=Object(s.a)(u,2),f=d[0],j=d[1];return Object(a.useEffect)((function(){return j(l.current)}),[]),Object(r.jsx)("svg",{className:i,ref:l,viewBox:"0 0 ".concat(c," ").concat(o),width:c,height:o,children:Object(r.jsx)(k.Provider,{value:f,children:n})})}};function w(){return Object(a.useContext)(k)}function S(){var e=Object(l.a)(["\n\theight: 100vh;\n\twidth: 100vw;\n\tbackground: ",";\n\tz-index: 4;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]);return S=function(){return e},e}function z(){var e=Object(l.a)(["\n\tanimation: rotate 2s linear infinite;\n\tmargin: -25px 0 0 -25px;\n\twidth: 50px;\n\theight: 50px;\n\n\t& .path {\n\t\tstroke: ",";\n\t\tstroke-linecap: round;\n\t\tanimation: dash 1.5s ease-in-out infinite;\n\t}\n\n\t@keyframes rotate {\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t@keyframes dash {\n\t\t0% {\n\t\t\tstroke-dasharray: 1, 150;\n\t\t\tstroke-dashoffset: 0;\n\t\t}\n\t\t50% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -35;\n\t\t}\n\t\t100% {\n\t\t\tstroke-dasharray: 90, 150;\n\t\t\tstroke-dashoffset: -124;\n\t\t}\n\t}\n"]);return z=function(){return e},e}var P=function(){return Object(r.jsx)(B,{children:Object(r.jsxs)(N,{viewBox:"0 0 50 50",children:[Object(r.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"}),Object(r.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"}),Object(r.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4"})]})})},N=u.default.svg(z(),j.green),B=u.default.div(S(),j.primary);function F(){var e=Object(l.a)(["\n\ttransition-duration: 100ms;\n\t/* fill: ","; */\n\tfill-opacity: 1;\n\t/* stroke: ","; */\n\tstroke-width: 1;\n\t/* stroke-width: ","; */\n\t/* stroke: ","; */\n\t&:hover {\n\t\t/* stroke: ","; */\n\t}\n"]);return F=function(){return e},e}function U(){var e=Object(l.a)(["\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: center;\n\tpadding-top: ",";\n\tpadding-left: ",";\n\tpadding-right: ",";\n\tpadding-bottom: ",";\n\tmax-width: 100%;\n\tmin-height: 100%;\n\n\theight: 100vh;\n\t.map {\n\t\tborder: 1px solid red;\n\t}\n\t.legend {\n\t\tposition: absolute;\n\n\t\tbottom: 0;\n\t\tleft: 10px;\n\t}\n"]);return U=function(){return e},e}var E=u.default.div(U(),b(32),b(32),b(32),b(32)),C=u.default.circle(F(),(function(e){return e.active,j.blue}),(function(e){return e.active?e.fill:j.blue}),(function(e){return e.active?1:3}),(function(e){return e.fill}),(function(e){return j.red})),V=function(e){var t=e.children,n=e.path,i=e.activeProvince,c=e.setActiveProvince,o=w(),l=Object(a.useState)({x:0,y:0,k:1}),u=Object(s.a)(l,2),d=u[0],f=d.x,j=d.y,b=d.k,h=u[1],p=function(e){var t=e.transform;h(t)};return Object(a.useEffect)((function(){if(o){var e=Object(v.s)(o),t=e.attr("width"),r=e.attr("height"),a=Object(v.t)().scaleExtent([1,10]).on("zoom",p),l=Object(v.s)(i).node();if(i){var u=n.bounds(l),d=Object(s.a)(u,2),f=Object(s.a)(d[0],2),j=f[0],b=f[1],h=Object(s.a)(d[1],2),g=h[0],O=h[1];e.selectAll("path"),e.transition().duration(750).call(a.transform,v.u.translate(t/2,r/2).scale(Math.min(8,.9/Math.max((g-j)/t,(O-b)/r))).translate(-(j+g)/2,-(b+O)/2))}else e.transition().duration(750).call(a.transform,v.u,Object(v.v)(e.node()).invert([t/2,r/2])),c(null);e.call(a)}}),[o,i]),Object(r.jsx)("g",{transform:"translate(".concat(f,", ").concat(j,") scale(").concat(b,")"),strokeWidth:1/b,children:t})},A=(n(57),function(e){var t=e.colorScale,n=e.tickSpacing,i=void 0===n?25:n,c=e.tickSize,o=void 0===c?8:c,s=e.tickTextOffset,l=void 0===s?-25:s,u=e.onHover,d=e.hoveredUsage,f=e.fadeOpacity,j=e.LegendLabel,b=(e.className,e.dimensions),h=e.sizeScale,p=b.width,g=(b.height,w()),O=Object(a.useRef)();return Object(a.useEffect)((function(){if(g){var e=Object(v.s)(g).select(".size-legend");e.append("text").text("Capaciteit Parkeergarage").attr("transform","translate(".concat(0,",80)")).attr("font-weight","bold").attr("class","legend-text");var t=e.append("g").attr("fill","#444").attr("transform","translate(".concat(0,",120)")).attr("text-anchor","end").selectAll("g").data([100,1e3,2400]).join("g");t.append("circle").attr("fill","none").attr("stroke","#444").attr("cy",(function(e){return-h(e)})).attr("r",h),t.append("text").attr("y",(function(e){return-10-2*h(e)})).attr("x",l).attr("dy","1.3em").text(Object(v.d)(".0f")).attr("class","legend-text")}}),[g,O]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("g",{transform:"translate(".concat(p-20,", ",100,")"),textAnchor:"end",children:[Object(r.jsxs)("g",{className:"color-legend",children:[Object(r.jsx)("text",{x:0,y:-25,className:"axis-label",children:j}),t.domain().map((function(e,n){return Object(r.jsxs)("g",{className:"tick",transform:"translate(0,".concat(n*i,")"),onMouseEnter:function(){u(e)},onMouseOut:function(){u(null)},children:[Object(r.jsx)("text",{x:l,dy:".32em",children:e}),Object(r.jsx)(C,{fill:t(e),r:o,opacity:d&&e!==d?f:1})]},n)}))]}),Object(r.jsx)("g",{ref:O,className:"size-legend"})]})})});function D(){var e=Object(l.a)(["\n\ttransition-duration: 300ms;\n\t/* fill: ","; */\n\tfill-opacity: 1;\n\t/* stroke: ","; */\n\t/* stroke-width: 0.5; */\n\t/* stroke-width: ","; */\n\t&:hover {\n\t\tstroke: ",";\n\t}\n"]);return D=function(){return e},e}function M(){var e=Object(l.a)(["\n\t/* transition-duration: 700ms; */\n\n\t:hover {\n\t\topacity: 0.7;\n\t}\n"]);return M=function(){return e},e}var G=function(e){var t=e.nld,n=e.data,i=e.colorScale,c=e.colorValue,o=e.sizeScale,s=e.sizeValue,l=e.activeProvince,u=e.activateProvince,d=e.setActiveProvince,f=e.filteredUsage,j=e.hoveredUsage,b=e.fadeOpacity,h=e.dimensions,p=(t.gemeente,t.gemeenteBorder),g=t.province,O=t.provinceBorder,m=h.width,x=h.height,k=Object(v.h)().translate([m/2,x/2]),y=Object(v.i)().projection(k),w=Object(v.f)(g),S=Object(v.e)(g),z=m/Object(v.g)(S[1],S[0])/Math.sqrt(2);return k.scale(z).center(w),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(V,{setActiveProvince:d,activeProvince:l,path:y,size:h,width:m,height:x,children:[Object(a.useMemo)((function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("g",{className:"gemeentes",children:Object(r.jsx)("path",{className:"gemeente-borders",d:y(p)})}),Object(r.jsxs)("g",{className:"provinces",children:[g.features.map((function(e){return Object(r.jsx)(R,{data:e,d:y(e),title:e.properties.statnaam,active:l===e,onClick:function(){return u(e)}},e.id)})),Object(r.jsx)("path",{className:"province-borders",d:y(O)})]})]})}),[y,g,O,p]),Object(r.jsx)(H,{filteredUsage:f,data:n,projection:k,colorScale:i,colorValue:c,activeProvince:l,hoveredUsage:j,fadeOpacity:b,sizeScale:o,sizeValue:s}),Object(r.jsx)(H,{filteredUsage:f,data:f,projection:k,colorScale:i,colorValue:c,sizeValue:s,sizeScale:o})]})})},R=function(e){var t=e.d,n=e.active,a=e.onClick;return Object(r.jsx)(L,{className:n?"province active":"province",d:t,onClick:a,title:t.properties})},L=u.default.path(M()),H=function(e){var t=e.data,n=e.projection,a=e.colorScale,i=e.colorValue,c=(e.filteredUsage,e.activeProvince,e.hoveredUsage),o=e.fadeOpacity,l=e.sizeScale,u=e.sizeValue;return Object(r.jsx)("g",{className:"parking-locations",children:t.map((function(e){var t=n([e.longitude,e.latitude]),d=Object(s.a)(t,2),f=d[0],j=d[1];return Object(r.jsx)(I,{cx:f,cy:j,r:l(u(e)),fill:a(i(e)),hoveredUsage:c,usage:e.usage,opacity:c&&e.usage!==c?o:.8,children:Object(r.jsxs)("title",{children:[" ",e.name]})},e.id)}))})},I=u.default.circle(D(),(function(e){return e.active,j.blue}),(function(e){return e.active?j.red:j.blue}),(function(e){return e.active?1:3}),j.white),T=function(e){var t=e.data,n=e.dimensions,i=(e.sizeScale,e.sizeValue,e.colorValue,e.colorScale,n.width),c=n.height,o=w(),s=Object(a.useRef)();return Object(a.useEffect)((function(){if(o&&t&&n){var e=Object(v.n)(t,(function(e){return e.length}),(function(e){return e.usage})),r=Object(v.m)().value((function(e){return e})),a=Object(v.a)().outerRadius(Math.min(i,c)/2-1).innerRadius(0).startAngle((function(e){return e})).endAngle((function(e){return e})),s=Object(v.s)(o).select(".pie-chart");s.selectAll(".arc").data(e).enter().append("path").attr("d",r).attr("fill",(function(e){return console.log(e)})).attr("stroke","white").style("stroke-width","2px").style("opacity",.7),s.append("path").attr("d",a).attr("fill","red")}}),[o,t,s]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("g",{transform:"translate(".concat(i-4,", ").concat(c-500,")"),children:Object(r.jsx)("g",{ref:s,className:"pie-chart"})})})},W=function(e){var t=e.nld,n=e.data,i=e.filteredUsage,c=(e.filteredProvince,e.colorScale),o=e.colorValue,l=e.sizeValue,u=e.hoveredUsage,d=e.fadeOpacity,f=e.children,j=e.activeProvince,b=e.setActiveProvince,h=e.setHoveredUsage,p=(t.gemeente,t.gemeenteBorder,t.province,t.provinceBorder,n.allData),g=Object(a.useState)(null),O=Object(s.a)(g,2),m=(O[0],O[1],Object(a.useState)(10)),k=Object(s.a)(m,2),w=k[0],S=k[1],z=Object(a.useRef)(),P=function(e){var t=Object(a.useState)(x(e?e.current:null)),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useCallback)((function(){e.current&&i(x(e.current))}),[e]);return Object(a.useLayoutEffect)((function(){var t=e.current;if(t){if(c(),"function"===typeof ResizeObserver){var n=new ResizeObserver((function(){return c()}));return n.observe(t),function(){n&&(n.disconnect(),n=null)}}return window.addEventListener("resize",c),function(){window.removeEventListener("resize",c)}}}),[e,c]),r}(z),N=(P.width,P.height,Object(a.useMemo)((function(){return Object(v.r)().domain([0,Object(v.l)(p,l)]).range([0,w])}),[t,n,l,w]));return Object(a.useEffect)((function(){}),[P]),Object(r.jsxs)("div",{className:"viz-wrapper",ref:z,children:[Object(r.jsxs)(y,{className:"map",size:P,children:[Object(r.jsx)(G,{nld:t,data:p,colorScale:c,colorValue:o,activeProvince:j,activateProvince:function(e){if(null===j||j!==e)return b(e),void S(5);j===e&&(b(null),S(10))},hoveredUsage:u,filteredUsage:i,fadeOpacity:d,sizeScale:N,sizeValue:l,dimensions:P,setActiveProvince:b}),Object(r.jsx)(A,{className:"legend",data:p,onHover:h,hoveredUsage:u,colorScale:c,colorValue:o,tickSpacing:22,tickSize:8,tickTextOffset:-18,fadeOpacity:.2,LegendLabel:"Soort Parkeermogelijkheid",dimensions:P,sizeScale:N}),Object(r.jsx)(T,{data:p,hoveredUsage:u,filteredUsage:i,colorScale:c,colorValue:o,sizeValue:l,fadeOpacity:.2,setActiveProvince:b,activeProvince:j,setHoveredUsage:h,dimensions:P,sizeScale:N})]}),f]})};function _(){var e=Object(l.a)([""]);return _=function(){return e},e}u.default.g(_());var q=function(){var e=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){Object(v.k)("https://gist.githubusercontent.com/GiovanniDw/9ebe42d142f40e58e333e546a82f9b0d/raw/1f4e17c5e2a072e12ed5b2dce628413294a13c5e/nl_2020.json").then((function(e){var t=e.objects,n=t.gemeente_2020,a=t.provincie_2020;r({gemeente:Object(p.a)(e,n),gemeenteBorder:Object(p.b)(e,n,(function(e,t){return e!==t})),province:Object(p.a)(e,a),provinceBorder:Object(p.b)(e,a,(function(e,t){return e!==t}))})}))}),[]),n}(),t=m(),n=(function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){Object(v.k)("https://unpkg.com/world-atlas@2.0.2/countries-10m.json").then((function(e){var t=e.objects,n=t.countries,a=t.land;r({land:Object(p.a)(e,a),countries:Object(p.b)(e,n,(function(e,t){return e!==t}))})}))}),[])}(),Object(a.useState)(null)),i=Object(s.a)(n,2),c=i[0],o=i[1],l=Object(a.useState)(null),u=Object(s.a)(l,2),d=u[0],f=u[1],b=Object(a.useRef)();if(!e||!t)return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(P,{})});var g=function(e){return e.usage},O=[j.darkBlue,j.darkGray,j.yellow],x=t.allData.filter((function(e){return c===g(e)})),k=t.allData.filter((function(e){return d===function(e){return e.province}(e)})),y=Object(v.q)().domain(t.allData.map(g)).range(O);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(E,{ref:b,children:[console.log(t.nested),Object(r.jsx)(W,{nld:e,data:t,hoveredUsage:c,filteredUsage:x,filteredProvince:k,colorScale:y,colorValue:g,sizeValue:function(e){return e.capacity},fadeOpacity:.2,setActiveProvince:f,activeProvince:d,setHoveredUsage:o,children:Object(r.jsxs)("h1",{className:"title",children:["Parkeer plaatsen van Nederland"," ",Object(r.jsx)("span",{className:"current-province",onClick:function(){return f(null)},children:d?"in ".concat(d.properties.statnaam):""})]})})]}),Object(r.jsx)(h,{})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(q,{})}),document.getElementById("root")),J()}},[[181,1,2]]]);
//# sourceMappingURL=main.c032c54b.chunk.js.map